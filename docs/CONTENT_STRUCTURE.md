# Content Structure

## Overview

All site content is stored as JSON files in the `content/` directory. These files are generated by build scripts and can be manually edited.

## File Locations

```
content/
├── site/
│   ├── site.json          # Main site configuration
│   ├── showcase.json      # Showcase images
│   └── about.json         # About page images
├── albums.json            # Album index (generated)
├── albums/
│   └── {slug}.json        # Individual album data
├── trips/
│   └── {slug}.json        # Trip definitions
└── map.json               # Global map data (generated)
```

## Site Configuration (`content/site/site.json`)

### Structure

```json
{
  "site": {
    "title": "Site Title",
    "ownerName": "Owner Name",
    "tagline": "Optional tagline"
  },
  "theme": {
    "name": "mono" | "paper"
  },
  "nav": {
    "items": [
      {
        "label": "home",
        "href": "/",
        "enabled": true
      }
    ]
  },
  "social": {
    "items": [
      {
        "label": "GitHub",
        "href": "https://github.com/user",
        "icon": "github",
        "enabled": true
      }
    ]
  },
  "hero": {
    "headline": "Headline",
    "subheadline": "Subheadline",
    "layout": "default",
    "images": [
      {
        "src": "/hero/image-large.webp",
        "alt": "Alt text",
        "caption": "7mm • f/1.8 • 1/250s • ISO 64",
        "order": 1
      }
    ]
  },
  "about": {
    "camera": {
      "imageSrc": "/about/portrait-large.webp",
      "title": "Title",
      "subtitle": "Subtitle",
      "body": "Body text with \\n line breaks"
    }
  },
  "favorites": {
    "album": { "slug": "album-slug", "enabled": true },
    "trip": { "slug": "trip-slug", "enabled": true }
  },
  "seo": {
    "defaultTitle": "Site Title",
    "titleTemplate": "%s · Site Title",
    "description": "Site description",
    "siteUrl": "https://example.com",
    "ogImage": "/og-image.jpg",
    "twitterHandle": "@handle",
    "robots": "index,follow"
  }
}
```

## Album Index (`content/albums.json`)

### Structure

```json
{
  "albums": [
    {
      "id": "album-slug",
      "slug": "album-slug",
      "title": "Album Title",
      "description": "Optional description",
      "tags": ["tag1", "tag2"],
      "date": "2025-01-15",
      "startDate": "2025-01-15",
      "endDate": "2025-01-20",
      "cover": "photos/album-slug/IMG_001-large.webp",
      "coverAspectRatio": 1.5,
      "count": 25,
      "isFavorite": false,
      "primaryLocation": {
        "name": "Location Name",
        "lat": 40.123,
        "lng": -111.456
      }
    }
  ]
}
```

**Note**: This is a summary - does not include `photos` array. Load individual album JSON for full data.

## Individual Album (`content/albums/{slug}.json`)

### Structure

```json
{
  "id": "album-slug",
  "slug": "album-slug",
  "title": "Album Title",
  "description": "Description",
  "tags": ["tag1", "tag2"],
  "date": "2025-01-15",
  "startDate": "2025-01-15",
  "endDate": "2025-01-20",
  "cover": "photos/album-slug/IMG_001-large.webp",
  "coverAspectRatio": 1.5,
  "count": 25,
  "isFavorite": false,
  "primaryLocation": {
    "name": "Location Name",
    "lat": 40.123,
    "lng": -111.456
  },
  "photos": [
    {
      "filename": "IMG_001.JPG",
      "path": "photos/album-slug/IMG_001-large.webp",
      "pathLarge": "photos/album-slug/IMG_001-large.webp",
      "pathSmall": "photos/album-slug/IMG_001-small.webp",
      "pathBlur": "photos/album-slug/IMG_001-blur.webp",
      "width": 6000,
      "height": 4000,
      "aspectRatio": 1.5,
      "lat": 40.123,
      "lng": -111.456,
      "exif": {
        "camera": "Canon EOS R5",
        "lens": "RF 24-70mm f/2.8",
        "aperture": "f/8",
        "shutterSpeed": "1/250s",
        "iso": 100,
        "focalLength": "50mm",
        "dateTaken": "2025-01-15T12:00:00.000Z",
        "copyright": null,
        "artist": null,
        "description": null
      }
    }
  ]
}
```

## Trip Definition (`content/trips/{slug}.json`)

### Structure

```json
{
  "slug": "trip-slug",
  "title": "Trip Title",
  "dateStart": "2025-01-01",
  "dateEnd": "2025-01-10",
  "region": "Western US",
  "summary": "Trip description",
  "coverImage": "/photos/trip-cover.webp",
  "albumIds": ["album-1", "album-2"],
  "route": {
    "polyline": [
      [40.123, -111.456],
      [40.234, -111.567]
    ],
    "gpxFile": "/trips/trip.gpx"
  },
  "highlights": [
    {
      "id": "highlight-1",
      "title": "Highlight Title",
      "description": "Description",
      "date": "2025-01-05",
      "image": "/photos/highlight.webp",
      "albumSlug": "album-1",
      "photoFilename": "IMG_001.JPG",
      "mapLat": 40.123,
      "mapLng": -111.456
    }
  ],
  "media": [
    {
      "type": "map-image",
      "src": "/trips/route-map.webp",
      "caption": "Route map"
    }
  ]
}
```

**Note**: Trip references albums via `albumIds` array. Components load album JSON files at runtime.

## Map Data (`content/map.json`)

### Structure

```json
{
  "albums": [
    {
      "albumSlug": "album-slug",
      "albumTitle": "Album Title",
      "lat": 40.123,
      "lng": -111.456,
      "photoCount": 25,
      "tags": ["tag1", "tag2"],
      "dateRange": {
        "start": "2025-01-15T00:00:00.000Z",
        "end": "2025-01-20T23:59:59.999Z"
      }
    }
  ]
}
```

**Note**: Generated by `rebuildAlbumsIndex.mjs`. Only includes albums with valid GPS coordinates.

## Showcase (`content/site/showcase.json`)

### Structure

```json
{
  "images": [
    {
      "id": 1,
      "type": "landscape" | "portrait",
      "side": "left" | "right",
      "src": "/photos/showcase/IMG_001-large.webp",
      "alt": "Alt text",
      "label": "Optional label",
      "location": "Location name",
      "exif": {
        "camera": "Canon EOS R5",
        "lens": "RF 24-70mm",
        "aperture": "f/8",
        "shutterSpeed": "1/250s",
        "iso": 100,
        "focalLength": "50mm",
        "dateTaken": "2025-01-15T12:00:00.000Z"
      },
      "dimensions": {
        "width": 6000,
        "height": 4000,
        "aspectRatio": 1.5
      },
      "order": 1
    }
  ]
}
```

## About Images (`content/site/about.json`)

### Structure

```json
{
  "images": [
    {
      "src": "/about/portrait-large.webp",
      "alt": "Portrait",
      "caption": "Optional caption"
    }
  ]
}
```

## File Naming Conventions

### Albums
- Slug generated from folder name: `My Album` → `my-album`
- JSON file: `content/albums/my-album.json`
- Images: `public/photos/my-album/{filename}-{variant}.webp`

### Trips
- Manual slug in JSON file
- JSON file: `content/trips/{slug}.json`
- Referenced in `src/data/trips.js` as `TRIP_SLUGS` array

### Images
- Variants: `{basename}-large.webp`, `{basename}-small.webp`, `{basename}-blur.webp`
- Paths in JSON are relative to site root (start with `/`)

## Data Relationships

### Albums → Trips
- Trips reference albums via `albumIds: ["album-1", "album-2"]`
- Components load both trip JSON and referenced album JSONs

### Albums → Map
- Albums with GPS data appear in `map.json`
- Globe component uses `map.json` for markers

### Site Config → All Components
- `site.json` provides configuration for:
  - Navigation (NavBar)
  - Hero images (Hero)
  - Showcase (Showcase)
  - About camera (AboutCameraFocus)
  - Social links (AboutSocialLinks, Footer)
  - Favorites (FavoriteAlbum, FavoriteTrip)
